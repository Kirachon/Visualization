# Story 3.3.2: Version Diff Viewer UI & Restore Flow

## Status
Planned (deferred from Story 3.3)

## Story
As a user, I want to view differences between dashboard versions and restore a prior version from the UI.

## Scope
- UI component to list versions and display diffs (layout/components/config)
- Hook up Restore action to POST /api/v1/versions/:id/restore
- Activity log entry display after restore

## Acceptance Criteria
1) Version List & Diff
- Given a dashboard with versions
- When I open the versions panel
- Then I see version list, labels, timestamps, and a diff view per selection

2) Restore From UI
- Given a selected version
- When I click Restore and confirm
- Then the backend restore API is invoked and the dashboard updates

3) Activity Feed Integration
- Given a successful restore
- When I view activity feed
- Then a "dashboard.restored" entry is visible with actor and version

## Non-Functional Requirements
- No runtime errors; TypeScript strict
- Reasonable performance (<1s diff render on typical dashboards)

## Risks & Mitigations
- Large JSON diffs -> Use virtualized diff viewer and chunking if needed

## Tasks
1. UI: Version list + labels
2. UI: JSON/layout diff viewer (pretty and compact modes)
3. Action: Restore button wired to API + optimistic UI update
4. Tests: component tests (diff render), integration (restore flow)

## DoD
- [ ] Version list and diff viewer implemented
- [ ] Restore flow wired and verified
- [ ] Tests added and green
- [ ] Docs updated with screenshots and known limitations

